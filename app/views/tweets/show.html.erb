<%= render partial: "shared/second_header"%>

<div class="tweet-tweet-comment">
   <div class='tweet-img-content'> 
       <%= image_tag @tweet.image.variant(resize: '400x400'), class: 'tweet-image' if @tweet.image.attached? %>
       <% if @tweet.video.attached? %> <video src="<%= rails_blob_path(@tweet.video)%>" type="video/mp4" controls class="tweet-video" ></video>
       <% end %>
       <div class="more"> 
         <p><%= @tweet.content %></p>
       </div>
        <ul class="more_list">
         <% if user_signed_in? && current_user.id == @tweet.user_id %>
          <li>
            <%= link_to '編集', edit_tweet_path(@tweet.id), method: :get %>
          </li>
          <li>
            <%= link_to '削除', tweet_path(@tweet.id), method: :delete %>
          </li>
          <% end %>
        </ul>
   </div>
   <div class="container">
    <% if user_signed_in? %>
      <%= form_with(model: [@tweet, @comment], local: true) do |form| %>
        <%= form.text_area :text, placeholder: "コメントする", class:"content-text" %>
        <%= form.submit "SEND" %>
      <% end %>
    <% else %>
      <strong><p>※※※ コメントの投稿には新規登録/ログインが必要です ※※※</p></strong>
    <% end %>
    <div class="comments">
      <h4>＜コメント一覧＞</h4>
      <% @comments.each do |comment| %>
        <p>
          <strong><%= link_to comment.user.nickname, "/users/#{comment.user_id}" %>：</strong>
          <%= comment.text %>
        </p>
      <% end %>
    </div>
   </div>
   </div>
<%= render partial: "shared/footer"%>
  